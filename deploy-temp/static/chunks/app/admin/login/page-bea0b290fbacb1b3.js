(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2116],{63:(e,t,a)=>{"use strict";var l=a(7260);a.o(l,"usePathname")&&a.d(t,{usePathname:function(){return l.usePathname}}),a.o(l,"useRouter")&&a.d(t,{useRouter:function(){return l.useRouter}}),a.o(l,"useSearchParams")&&a.d(t,{useSearchParams:function(){return l.useSearchParams}})},2112:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var l=a(5155),r=a(2115),s=a(63);let o="gc_admin_token",n="YGC_JWT",d="YGC_ROLE";function c(){let e=(0,s.useRouter)(),[t,a]=(0,r.useState)("YGC-ADMIN"),[c,i]=(0,r.useState)(""),[u,m]=(0,r.useState)(!1),[x,b]=(0,r.useState)(null),h=(0,r.useMemo)(()=>t.trim().length>0&&c.trim().length>0&&!u,[t,c,u]);async function p(a){a.preventDefault();let l=t.trim();if(!l||!c)return void b("Merci de renseigner l’identifiant et le mot de passe.");try{m(!0),b(null);let t=await fetch("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:l,email:l,password:c})}),a=await t.text(),r=null;try{r=a?JSON.parse(a):null}catch(e){r=null}if(!t.ok){let e=(null==r?void 0:r.error)||"HTTP ".concat(t.status);throw Error(e)}if(!(null==r?void 0:r.ok)||!r.token)throw Error((null==r?void 0:r.error)||"Identifiants invalides");window.localStorage.setItem(o,r.token),window.localStorage.setItem(n,r.token),r.role&&window.localStorage.setItem(d,r.role),e.replace("/admin/devices")}catch(e){b(e instanceof Error?e.message:"Erreur de connexion.")}finally{m(!1)}}return(0,r.useEffect)(()=>{try{window.localStorage.getItem(o)&&e.replace("/admin/devices")}catch(e){}},[e]),(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-white",children:(0,l.jsxs)("div",{className:"w-full max-w-md rounded-2xl border border-slate-800 bg-slate-900/70 p-6 shadow-xl",children:[(0,l.jsx)("h1",{className:"text-xl font-semibold mb-1",children:"Yarmotek GuardCloud – Admin"}),(0,l.jsx)("p",{className:"text-xs text-slate-300 mb-4",children:"Connectez-vous pour acc\xe9der au tableau de bord global."}),x&&(0,l.jsx)("div",{className:"mb-4 rounded-md bg-red-900/70 px-3 py-2 text-xs text-red-100",children:x}),(0,l.jsxs)("form",{onSubmit:p,className:"space-y-3",children:[(0,l.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,l.jsx)("label",{className:"block text-slate-200",children:"Identifiant"}),(0,l.jsx)("input",{type:"text",value:t,onChange:e=>a(e.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm outline-none focus:border-emerald-400",placeholder:"YGC-ADMIN ou admin@yarmotek.com",autoComplete:"username",inputMode:"email"})]}),(0,l.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,l.jsx)("label",{className:"block text-slate-200",children:"Mot de passe"}),(0,l.jsx)("input",{type:"password",value:c,onChange:e=>i(e.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm outline-none focus:border-emerald-400",placeholder:"••••••••",autoComplete:"current-password"})]}),(0,l.jsx)("button",{type:"submit",disabled:!h,className:"mt-2 w-full rounded-md bg-emerald-500 py-2 text-sm font-semibold text-black hover:bg-emerald-400 disabled:opacity-60",children:u?"Connexion…":"Se connecter"}),(0,l.jsx)("button",{type:"button",onClick:()=>{try{window.localStorage.removeItem(o),window.localStorage.removeItem(n),window.localStorage.removeItem(d)}catch(e){}b("Token local effac\xe9. Vous pouvez vous reconnecter.")},className:"w-full rounded-md border border-slate-700 bg-slate-950/40 py-2 text-xs text-slate-200 hover:bg-slate-950",children:"Effacer le token local"})]})]})})}},7792:(e,t,a)=>{Promise.resolve().then(a.bind(a,2112))}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=7792)),_N_E=e.O()}]);