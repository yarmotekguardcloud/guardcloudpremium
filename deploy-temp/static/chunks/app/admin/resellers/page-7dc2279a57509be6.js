(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8722],{646:(e,s,t)=>{Promise.resolve().then(t.bind(t,4722))},4722:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});var l=t(5155),r=t(2115);function a(){let[e,s]=(0,r.useState)([]),[t,a]=(0,r.useState)(!1),[n,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{var e,t,l;try{a(!0),d(null);let l=await fetch("/api/admin/resellers",{method:"GET",cache:"no-store"}),r=await l.json();if(!r.ok)throw Error(null!=(e=r.error)?e:"API ok=false");s(null!=(t=r.items)?t:[])}catch(e){console.error("Erreur chargement revendeurs:",e),d(null!=(l=null==e?void 0:e.message)?l:"Erreur chargement des revendeurs")}finally{a(!1)}})()},[]);let c=e.reduce((e,s)=>{var t;return e+(null!=(t=s.tokensTotal)?t:0)},0),x=e.reduce((e,s)=>{var t;return e+(null!=(t=s.tokensActive)?t:0)},0),i=e.reduce((e,s)=>{var t;return e+(null!=(t=s.tokensUsed)?t:0)},0);return(0,l.jsxs)("main",{className:"flex h-[calc(100vh-80px)] flex-col gap-4 bg-slate-950/95 px-4 pb-4 pt-2 text-slate-100",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between rounded-2xl border border-slate-800 bg-gradient-to-r from-slate-950 via-slate-900 to-slate-950 px-4 py-3 shadow-lg shadow-black/40",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-xl font-semibold tracking-tight",children:"Revendeurs • SahelGuard"}),(0,l.jsx)("p",{className:"text-xs text-slate-400",children:"Vue globale des revendeurs, de leurs coordonn\xe9es et de leurs packs de tokens anti-vol."})]}),(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[(0,l.jsx)("div",{className:"rounded-full bg-slate-900 px-3 py-1",children:t?"Chargement…":"Revendeurs : ".concat(e.length)}),(0,l.jsxs)("div",{className:"rounded-full bg-slate-900 px-3 py-1",children:["Tokens totaux : ",(0,l.jsx)("span",{className:"font-semibold",children:c})]}),(0,l.jsxs)("div",{className:"rounded-full bg-slate-900 px-3 py-1",children:["Actifs :"," ",(0,l.jsx)("span",{className:"font-semibold text-emerald-400",children:x})]}),(0,l.jsxs)("div",{className:"rounded-full bg-slate-900 px-3 py-1",children:["Utilis\xe9s : ",(0,l.jsx)("span",{className:"font-semibold",children:i})]})]})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-auto rounded-2xl border border-slate-800 bg-slate-950/80 p-4",children:[n&&(0,l.jsxs)("div",{className:"mb-3 rounded-xl bg-red-950/60 p-3 text-sm text-red-100",children:["Impossible de charger la liste des revendeurs : ",n]}),!n&&!t&&0===e.length&&(0,l.jsx)("div",{className:"text-center text-sm text-slate-400",children:"Aucun revendeur enregistr\xe9 pour l’instant."}),e.length>0&&(0,l.jsxs)("table",{className:"w-full border-collapse text-xs",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-slate-800 text-[11px] uppercase text-slate-400",children:[(0,l.jsx)("th",{className:"px-2 py-2 text-left",children:"ID revendeur"}),(0,l.jsx)("th",{className:"px-2 py-2 text-left",children:"Nom"}),(0,l.jsx)("th",{className:"px-2 py-2 text-left",children:"T\xe9l\xe9phone"}),(0,l.jsx)("th",{className:"px-2 py-2 text-left",children:"Email"}),(0,l.jsx)("th",{className:"px-2 py-2 text-right",children:"Tokens totaux"}),(0,l.jsx)("th",{className:"px-2 py-2 text-right",children:"Actifs"}),(0,l.jsx)("th",{className:"px-2 py-2 text-right",children:"Utilis\xe9s"})]})}),(0,l.jsx)("tbody",{children:e.map(e=>{var s,t,r,a,n,d;return(0,l.jsxs)("tr",{className:"border-b border-slate-900/70 hover:bg-slate-900/70",children:[(0,l.jsx)("td",{className:"px-2 py-2 font-mono text-[11px] text-slate-100",children:e.resellerId}),(0,l.jsx)("td",{className:"px-2 py-2 text-slate-100",children:null!=(s=e.name)?s:"—"}),(0,l.jsx)("td",{className:"px-2 py-2 text-slate-200",children:null!=(t=e.contactPhone)?t:"—"}),(0,l.jsx)("td",{className:"px-2 py-2 text-slate-200",children:null!=(r=e.contactEmail)?r:"—"}),(0,l.jsx)("td",{className:"px-2 py-2 text-right",children:null!=(a=e.tokensTotal)?a:0}),(0,l.jsx)("td",{className:"px-2 py-2 text-right",children:null!=(n=e.tokensActive)?n:0}),(0,l.jsx)("td",{className:"px-2 py-2 text-right",children:null!=(d=e.tokensUsed)?d:0})]},e.resellerId)})})]})]})]})}}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=646)),_N_E=e.O()}]);